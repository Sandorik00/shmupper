[gd_scene load_steps=28 format=3 uid="uid://dy3u08iwi2g08"]

[ext_resource type="Script" uid="uid://dlc22lmnwlxy" path="res://GlobalStage/StageNode.gd" id="1_220qp"]
[ext_resource type="Shader" uid="uid://dd6qku06jx3n3" path="res://bg.gdshader" id="4_cfitj"]
[ext_resource type="Script" uid="uid://bawmqqk4au0sj" path="res://Entities/Actors/Player/Player.gd" id="4_k84cc"]
[ext_resource type="Script" uid="uid://effwoefajqu1" path="res://GlobalStage/bigger.gd" id="7_8jo16"]
[ext_resource type="Script" uid="uid://cmldc78oktoag" path="res://Entities/Actors/Player/visual_hurtbox.gd" id="8_dabxs"]
[ext_resource type="Script" uid="uid://ufl23spn1oif" path="res://GlobalStage/HUD.gd" id="8_hhu7f"]
[ext_resource type="Script" uid="uid://b57a55g3ocvpo" path="res://GlobalStage/smaller.gd" id="8_kbml8"]
[ext_resource type="Texture2D" uid="uid://b4qedcchdiitt" path="res://Assets/Sprites/player/player-marisa.png" id="9_bc5hy"]
[ext_resource type="Script" uid="uid://r3eqieitewty" path="res://GlobalStage/fps_counter.gd" id="10_07t30"]
[ext_resource type="FontFile" uid="uid://d0eqnur73j3pp" path="res://Fonts/quinquefive/QuinqueFive.ttf" id="12_dabxs"]

[sub_resource type="CircleShape2D" id="CircleShape2D_07t30"]
radius = 8.0

[sub_resource type="AtlasTexture" id="AtlasTexture_xcexr"]
atlas = ExtResource("9_bc5hy")
region = Rect2(0, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_bew2h"]
atlas = ExtResource("9_bc5hy")
region = Rect2(64, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_lmflo"]
atlas = ExtResource("9_bc5hy")
region = Rect2(128, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_o1naa"]
atlas = ExtResource("9_bc5hy")
region = Rect2(0, 64, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_kow25"]
atlas = ExtResource("9_bc5hy")
region = Rect2(64, 64, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_ay1ce"]
atlas = ExtResource("9_bc5hy")
region = Rect2(128, 64, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_rcnnr"]
atlas = ExtResource("9_bc5hy")
region = Rect2(0, 128, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_pa4lm"]
atlas = ExtResource("9_bc5hy")
region = Rect2(64, 128, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_2i728"]
atlas = ExtResource("9_bc5hy")
region = Rect2(128, 128, 64, 64)

[sub_resource type="SpriteFrames" id="SpriteFrames_0noyg"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_xcexr")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_bew2h")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_lmflo")
}],
"loop": true,
"name": &"default",
"speed": 10.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_o1naa")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_kow25")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ay1ce")
}],
"loop": true,
"name": &"left",
"speed": 10.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_rcnnr")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_pa4lm")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_2i728")
}],
"loop": true,
"name": &"right",
"speed": 10.0
}]

[sub_resource type="LabelSettings" id="LabelSettings_07t30"]
font = ExtResource("12_dabxs")
font_size = 10

[sub_resource type="Curve2D" id="Curve2D_chdxj"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, -250, -50, 800, -50, -1200, 200, -500, 300)
}
point_count = 2

[sub_resource type="Curve2D" id="Curve2D_ke6mh"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 250, -50, -800, -50, 0, 0, 500, 300)
}
point_count = 2

[sub_resource type="Curve2D" id="Curve2D_nmw0x"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 100)
}
point_count = 2

[sub_resource type="ShaderMaterial" id="ShaderMaterial_bc5hy"]
shader = ExtResource("4_cfitj")
shader_parameter/density = 180.0
shader_parameter/layer_parascale = 2
shader_parameter/speedx = 1.49012e-07
shader_parameter/speedy = 0.1
shader_parameter/star_horizontal_wave = 0.3
shader_parameter/star_size = 3.0
shader_parameter/twinkle_effect = 0.60000000894072
shader_parameter/twinkle_speed = 0.3
shader_parameter/fbm_strength = 0.12
shader_parameter/fbm_mix = 0.07
shader_parameter/fbm_freq = 4.0
shader_parameter/fbm_amp = 1.5
shader_parameter/fbm_speed = 5.0
shader_parameter/warp_scale = 2.0
shader_parameter/cloud_freq = 40.0
shader_parameter/cloud_amp = 0.02
shader_parameter/cloud_speed = 5.0
shader_parameter/cloud_color_ci1 = 0.75
shader_parameter/cloud_color_ci2 = 0.45
shader_parameter/cloud_color_ci3 = 0.9
shader_parameter/cloud_color_shiftx = 0.0
shader_parameter/cloud_color_shifty = 0.0
shader_parameter/background_color = Color(0.02, 0.04, 0.12, 1)

[sub_resource type="CanvasTexture" id="CanvasTexture_cfitj"]

[node name="MainNode" type="Node2D" node_paths=PackedStringArray("pathsCollection")]
script = ExtResource("1_220qp")
pathsCollection = NodePath("PathsCollection")

[node name="Player" type="Area2D" parent="." node_paths=PackedStringArray("HUD")]
position = Vector2(231, 408)
scale = Vector2(0.75, 0.75)
collision_layer = 4
script = ExtResource("4_k84cc")
speed = 400
focus_speed = 100
hitbox_radius = 8.0
HUD = NodePath("../HUD")

[node name="Hitbox" type="CollisionShape2D" parent="Player"]
z_index = 2
shape = SubResource("CircleShape2D_07t30")

[node name="Animation" type="AnimatedSprite2D" parent="Player"]
sprite_frames = SubResource("SpriteFrames_0noyg")
animation = &"right"
autoplay = "default"

[node name="VisualHurtbox" type="Sprite2D" parent="Player"]
z_index = 1
script = ExtResource("8_dabxs")

[node name="ShootTimer" type="Timer" parent="."]
wait_time = 0.2
one_shot = true
autostart = true

[node name="HUD" type="CanvasLayer" parent="."]
script = ExtResource("8_hhu7f")

[node name="PanelAnchor" type="Panel" parent="HUD"]
z_index = 1
anchors_preset = 11
anchor_left = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 0
grow_vertical = 2
size_flags_horizontal = 8

[node name="StatusPanel" type="ColorRect" parent="HUD/PanelAnchor"]
layout_mode = 1
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -220.0
offset_bottom = 480.0
grow_horizontal = 0
color = Color(0.00392157, 0.360784, 0.54902, 0.752941)

[node name="PlayerHealth" type="ProgressBar" parent="HUD/PanelAnchor/StatusPanel"]
modulate = Color(0.788235, 0, 0, 1)
layout_mode = 0
offset_left = 32.0
offset_top = 120.0
offset_right = 132.0
offset_bottom = 150.0
rotation = -1.5708
max_value = 3.0
step = 1.0
show_percentage = false

[node name="Label" type="Label" parent="HUD/PanelAnchor/StatusPanel"]
z_index = 20
layout_mode = 1
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_top = -21.0
offset_right = 82.0
grow_vertical = 0
text = "FPS:2310"
label_settings = SubResource("LabelSettings_07t30")
vertical_alignment = 2
script = ExtResource("10_07t30")

[node name="Button" type="Button" parent="HUD"]
offset_left = -328.0
offset_top = 240.0
offset_right = -136.0
offset_bottom = 328.0
theme_override_font_sizes/font_size = 24
text = "БОЛЬШЕ"
script = ExtResource("7_8jo16")

[node name="Button2" type="Button" parent="HUD"]
offset_left = -312.0
offset_top = 384.0
offset_right = -176.0
offset_bottom = 440.0
text = "меньше"
script = ExtResource("8_kbml8")

[node name="PanelTop" type="Panel" parent="HUD"]
anchors_preset = 10
anchor_right = 1.0
grow_horizontal = 2

[node name="ColorRect" type="ColorRect" parent="HUD/PanelTop"]
z_index = 10
layout_mode = 1
anchors_preset = 10
anchor_right = 1.0
offset_left = 30.0
offset_right = -220.0
offset_bottom = 16.0
grow_horizontal = 2
color = Color(0.00392157, 0.360784, 0.54902, 0.752941)

[node name="PanelLeft" type="Panel" parent="HUD"]

[node name="ColorRect" type="ColorRect" parent="HUD/PanelLeft"]
layout_mode = 0
offset_right = 30.0
offset_bottom = 480.0
color = Color(0.00392157, 0.360784, 0.54902, 0.752941)

[node name="PanelBottom" type="Panel" parent="HUD"]
anchors_preset = 12
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 0

[node name="ColorRect" type="ColorRect" parent="HUD/PanelBottom"]
z_index = 10
layout_mode = 1
anchors_preset = 12
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 30.0
offset_top = -16.0
offset_right = -220.0
grow_horizontal = 2
grow_vertical = 0
color = Color(0.00392157, 0.360784, 0.54902, 0.752941)

[node name="PathsCollection" type="Node2D" parent="."]
position = Vector2(225, 0)

[node name="LeftSlideAndLeave" type="Path2D" parent="PathsCollection"]
curve = SubResource("Curve2D_chdxj")

[node name="RightSlideAndLeave" type="Path2D" parent="PathsCollection"]
curve = SubResource("Curve2D_ke6mh")

[node name="StraightAndWhite" type="Path2D" parent="PathsCollection"]
curve = SubResource("Curve2D_nmw0x")

[node name="DeathScreen" type="CanvasLayer" parent="."]
unique_name_in_owner = true
visible = false
follow_viewport_enabled = true

[node name="Panel" type="Panel" parent="DeathScreen"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="ColorRect" type="ColorRect" parent="DeathScreen/Panel"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0, 0, 0, 1)

[node name="RichTextLabel" type="RichTextLabel" parent="DeathScreen/Panel/ColorRect"]
clip_contents = false
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -211.0
offset_top = -92.0
offset_right = 211.0
offset_bottom = 92.0
grow_horizontal = 2
grow_vertical = 2
theme_override_colors/default_color = Color(0.70378155, 0.03377556, 0.12630415, 1)
theme_override_fonts/normal_font = ExtResource("12_dabxs")
theme_override_font_sizes/normal_font_size = 45
bbcode_enabled = true
text = "[center]Сосал?
"
horizontal_alignment = 1
vertical_alignment = 1

[node name="PatternTimer" type="Timer" parent="."]
unique_name_in_owner = true
wait_time = 3.0
autostart = true
ignore_time_scale = true

[node name="BG" type="Sprite2D" parent="."]
z_index = -505
material = SubResource("ShaderMaterial_bc5hy")
position = Vector2(320, 239.99998)
scale = Vector2(640, 480)
texture = SubResource("CanvasTexture_cfitj")

[connection signal="button_up" from="HUD/Button" to="HUD/Button" method="_on_button_up"]
[connection signal="button_up" from="HUD/Button2" to="HUD/Button2" method="_on_button_up"]
